
# 影院软件详细设计描述文档

## 文档修改历史

| 修改人员 | 日期   | 修改原因       | 版本号 |
| :------: | ------ | -------------- | ------ |
|   康南   | 5月4日 | 整合分配的内容 | 1.0.0  |
|          |        |                |        |

[TOC]

## 1. 引言

### 1.1 编制目的

本报告详细完成对电影院电影管理系统的概要设计，达到指导详细设计与开发的目的，同时实现和测试人员及用户的沟通。

本报告面向开发人员、测试人员及最终用户编写，是了解系统的导航。

### 1.2 词汇表

| 词汇名称 | 词汇含义       | 备注 |
| -------- | -------------- | ---- |
| CMS      | 电影院管理系统 | ……   |
| ……       | ……             | ……   |

### 1.3 参考资料

1.IEEE标准
2.需求文档0418
3.\*\*\*影院需求规格说明文档

## 2. 产品概述

	***影院是一家有着拓展业务需求的电影院。原影院只有售票部分使用软件处理，其他业务都是手工作业，由于影院规模扩大，顾客量大幅增长等原因，这已经不能适应它的业务发展需求。
电影管理系统SEII-LOLOK就是为\*\*\*影院新的业务需求发展要求而开发的，它包括一个数据集中服务器和多个客户端。数据集中服务器将所有的数据存储起来进行维护。用户通过客户端完成日常操作，客户端与数据集中服务器才是实时通信的方式完成数据交换,开发目标是帮助该影院处理日常的重点任务以及更好的服务观众
	其主要功能为：
	帮助影院上架、修改、下架电影，统计电影热度信息，添加、查看、修改排片信息，设置、修改、删除排片信息的观众可见时间，查看统计数据，发布优惠活动。
	帮助观众搜索、查找电影，标记电影为想看，查看电影列表、电影详情，购买电影票，购买、查看、充值会员卡。
	通过电影管理系统SEII-LOLOK的应用，期望为\*\*\*影院提高工作效率、合理安排影片场次、吸引观众并提高满意度、提高销售额和利润。

## 3. 系统结构设计概述

影院管理系统中，选择了三层架构体系结构风格，将系统分为3层：表现层、业务逻辑层、数据访问层，能够很好地展示整个系统结构。表现层主要是指与用户交互的界面，用于接收用户输入的数据和显示处理后用户需要的数据。业务逻辑层包含UI层和DAL层之间的桥梁，实现业务逻辑。与数据库打交道。主要实现对数据的增、删、改、查。将存储在数据库中的数据提交给业务层，同时将业务逻辑层处理的数据保存到数据库。

## 4. 结构视角

###  4.1 业务逻辑层的分解

#### 4.1.1 moviebl模块

#####(1) 模块概述
moviebl模块承担的需求参见需求规格说明文档功能需求以及相关非功能需求。
moviebl模块的职责以及接口参见软件系统结构描述文档表10

#####(2) 整体结构
根据体系结构设计，我们将系统分为展示层、业务逻辑层、数据层。每一层之间为了增加灵活性，添加了一些接口。在展示层和业务逻辑层之间，根据SpringBoot的机制，通过URL的访问的方式实现和业务逻辑模块交互。而在业务逻辑层于数据持久层之间，则通过主要通过MovieMapper和MovieLikeMapper两个接口进行交流。为了隔离业务逻辑职责和逻辑控制职责，我们增加了MovieController，这样MovieController会将对电影相关业务的处理委托给sales对象。根据功能的不同，为了提高内聚性，分了两个接口/实现类来实现MovieController所具备的功能：MovieService和MovieLikeService。为了实现其中的个别相关功能，额外分别调用了两个接口来实现相关功能：ScheduleServiceForBl接口和MovieServiceForBl接口，分别用于：查找影片的相关信息和根据ID查找电影。

moviebl模块的设计如图所示：

![moviebl](https://i.loli.net/2019/05/02/5ccaafcd147fa.jpg)

moviebl模块各个类的职责如下表所示：  

| 模块             | 职责                          |
| ---------------- | ----------------------------- |
| MovieController  | 实现movie相关的功能的控制逻辑 |
| MovieServiceImpl | 实现movie相关功能的业务逻辑   |
| MovieLikeService | 实现movie与统计相关的业务逻辑 |

#####(3) 模块内部类的接口规范

![](https://i.loli.net/2019/05/02/5ccad6560d210.png)

![](https://i.loli.net/2019/05/02/5ccad65b7d07e.png)

![](https://i.loli.net/2019/05/02/5ccad6617ae8e.png)

![](https://i.loli.net/2019/05/02/5ccad665210cd.png)

![](https://i.loli.net/2019/05/02/5ccad6681b40f.png)

![](https://i.loli.net/2019/05/02/5ccad66bcd180.png)

![](https://i.loli.net/2019/05/02/5ccad66fe3eee.png)

![](https://i.loli.net/2019/05/02/5ccad6744e52a.png)

![](https://i.loli.net/2019/05/02/5ccad6774ee4c.png)

#####(4) 业务逻辑层的动态模型
下图表明了该系统之中，当管理员用户输入了添加的电影的信息之后，电影模块业务逻辑处理的相关对象之间的协作。
![](https://i.loli.net/2019/05/02/5ccadde0a53cb.png)
下图所表示的状态图描述了Moviebl模块中，他的生存期间的状态序列、引起转移的时间，以及因为转移状态而伴随的动作。随着addMovie方法的调用，系统进入了MovieForm状态；再一次调用MovieServiceImpl的AddMovie方法，系统进入MovieMapper状态；在这个状态下系统调用InsertMovie方法，向底层数据库中插入相关的电影信息，并返回一个ResponceVO，系统进入ResponceVO状态并且显示

![](https://i.loli.net/2019/05/02/5ccae1615b245.png)

#####(5) 业务逻辑层的设计原理
利用委托式控制风格，每一个界面需要访问的业务逻辑由各自的控制器委托给不同的对象

#### 4.1.2 accountbl 模块

#####(1)模块概述

accountbl 模块承担的需求参见规格需求说明文档

accountbl模块的职责及借口参见软件体系结构描述文档

#####(2)整体结构

​	根据体系结构设计，我们将系统分为展示层、业务逻辑层、数据层。每一层之间为了增加灵活性，添加了一些接口。在展示层和业务逻辑层之间，根据SpringBoot的机制，通过URL的访问的方式实现和业务逻辑模块交互。而在业务逻辑层于数据持久层之间，则通过主要通过AccountMapper接口进行交流。为了隔离业务逻辑职责和逻辑控制职责，我们增加了AccountController，这样AccountController会将对账户相关业务的处理委托给AccountServicempl对象。根据功能的不同，为了提高内聚性，分了一个接口/实现类来实现AccountController所具备的功能：AccountService。

![](https://i.loli.net/2019/05/04/5ccd7ef5cc267.jpg)

| 模块               | 职责                            |
| ------------------ | ------------------------------- |
| AccountController  | 实现Account相关的功能的控制逻辑 |
| AccountServiceImpl | 实现Account相关功能的业务逻辑   |

##### (3)模块内部类的接口规范

表 accountbl模块各个类的职责

![avatar](https://i.loli.net/2019/04/11/5caf1ff3b3652.png)

##### (4)业务逻辑层动态模型

![Account2](https://i.loli.net/2019/05/04/5ccd7f558739d.jpg)

##### (5) 业务逻辑层的设计原理

利用委托式控制风格，每一个界面需要访问的业务逻辑由各自的控制器委托给不同的对象

#### 4.1.3 vipbl模块

##### (1)模块概述

vipbl 模块承担的需求参见规格需求说明文档

vipbl模块的职责及借口参见软件体系结构描述文档

##### (2)整体结构

​	根据体系结构设计，我们将系统分为展示层、业务逻辑层、数据层。每一层之间为了增加灵活性，添加了一些接口。在展示层和业务逻辑层之间，根据SpringBoot的机制，通过URL的访问的方式实现和业务逻辑模块交互。而在业务逻辑层于数据持久层之间，则通过主要通过VIPCardMapper接口进行交流。为了隔离业务逻辑职责和逻辑控制职责，我们增加了VIPController，这样VIPController会将对会员相关业务的处理委托给VIPCardServicempl对象。根据功能的不同，为了提高内聚性，分了一个接口/实现类来实现VIPCardController所具备的功能：VIPService。

![VIP](https://i.loli.net/2019/05/04/5ccd7f7d893a0.jpg)

| 模块               | 职责                            |
| ------------------ | ------------------------------- |
| VIPController  | 实现VIP相关的功能的控制逻辑 |
| VIPCardServiceImpl | 实现VIPCard相关功能的业务逻辑   |

##### (3)模块内部类的接口规范

![avatar](https://i.loli.net/2019/04/19/5cb9b76472ba3.png)

##### (4)业务逻辑层动态模型

![VIPcard](https://i.loli.net/2019/05/04/5ccd7fa0c6857.jpg)

##### (5) 业务逻辑层的设计原理

利用委托式控制风格，每一个界面需要访问的业务逻辑由各自的控制器委托给不同的对象

#### 4.1.4 salesbl模块

##### (1)模块概述

salebl 模块承担的需求参见规格需求说明文档

salebl模块的职责及借口参见软件体系结构描述文档

##### (2)整体结构

​	根据体系结构设计，我们将系统分为展示层、业务逻辑层、数据层。每一层之间为了增加灵活性，添加了一些接口。在展示层和业务逻辑层之间，根据SpringBoot的机制，通过URL的访问的方式实现和业务逻辑模块交互。而在业务逻辑层于数据持久层之间，则通过主要通过TicketMapper接口进行交流。为了隔离业务逻辑职责和逻辑控制职责，我们增加了TicketController，这样TicketController会将对销售相关业务的处理委托给TicketServicempl对象。根据功能的不同，为了提高内聚性，分了一个接口/实现类来实现VIPController所具备的功能：TicketService。

![Ticket](https://i.loli.net/2019/05/04/5ccd7fbb203ef.jpg)

| 模块               | 职责                            |
| ------------------ | ------------------------------- |
| TicketController  | 实现Ticket相关的功能的控制逻辑 |
| TicketServiceImpl | 实现Ticket相关功能的业务逻辑   |

##### (3)模块内部类的接口规范

![avatar](https://i.loli.net/2019/04/19/5cb9b7938cea0.png)

##### (4)业务逻辑层动态模型

​	![Ticket2](https://i.loli.net/2019/05/04/5ccd7fd8ea7b4.jpg)

##### (5) 业务逻辑层的设计原理

利用委托式控制风格，每一个界面需要访问的业务逻辑由各自的控制器委托给不同的对象

#### 4.1.5 schedulebl 模块

#####(1)模块描述

schedulebl 模块承担的需求参见需求规格说明文档功能需求及相关非功能需求。

schedulebl 模块的职责及接口参见软件系统结构描述文档表10。

#####(2)整体结构

根据体系结构设计，我们将系统分为展示层、业务逻辑层、数据层。每一层之间为了增加灵活性，添加了一些接口。在展示层和业务逻辑层之间，根据SpringBoot的机制，通过URL的访问的方式实现和业务逻辑模块交互。而在业务逻辑层于数据持久层之间，则通过主要通过ScheduleMapper接口进行交流。为了隔离业务逻辑职责和逻辑控制职责，我们增加了ScheduleController，这样ScheduleController会将对排片相关业务的处理委托给schedule对象。根据功能的不同，为了提高内聚性，分了两个接口/实现类来实现ScheduleController所具备的功能：ScheduleService。为了实现其中的个别相关功能，额外调用了一个接口来实现相关功能：ScheduleServiceForBl接口，用于：查找排片的相关信息和根据ID查找排片。

schedulebl模块的设计图如图所示：

![schedulebl](https://i.loli.net/2019/05/03/5ccb9547a1aa1.png)

couponbl模块各个类的职责如下表所示：  

| 模块                | 职责                          |
| ------------------- | ----------------------------- |
| ScheduleController  | 实现排片相关的功能的控制逻辑  |
| ScheduleServiceImpl | 实现排片相关功能的业务逻辑    |

#####(3) 模块内部类的接口规范

![](https://i.loli.net/2019/05/03/5ccbaab36b53e.png)
![](https://i.loli.net/2019/05/04/5ccd84ed77a6f.png)
![](https://i.loli.net/2019/05/04/5ccd85082461c.png)
![](https://i.loli.net/2019/05/04/5ccd8529a4889.png)
![](https://i.loli.net/2019/05/04/5ccd8540a52d2.png)

#####(4) 业务逻辑层的动态模型

下图表明了该系统之中，当管理员用户输入了添加的排片的信息之后，排片模块业务逻辑处理的相关对象之间的协作。

![](https://i.loli.net/2019/05/03/5ccbb8b6369ef.png)



下图所表示的状态图描述了Schedulebl模块中，他的生存期间的状态序列、引起转移的时间，以及因为转移状态而伴随的动作。随着addSchedule方法的调用，系统进入了ScheduleForm状态；再一次调用ScheduleServiceImpl的AddSchedule方法，系统进入ScheduleMapper状态；在这个状态下系统调用InsertSchedule3方法，向底层数据库中插入相关的电影信息，并返回一个ResponceVO，系统进入ResponceVO状态并且显示

![](https://i.loli.net/2019/05/03/5ccbac3f119a7.png)

#####(5) 业务逻辑层的设计原理
利用委托式控制风格，每一个界面需要访问的业务逻辑由各自的控制器委托给不同的对象

#### 4.1.6 couponbl 模块

#####(1)模块描述

couponbl 模块承担的需求参见需求规格说明文档功能需求及相关非功能需求。

couponbl 模块的职责及接口参见软件系统结构描述文档表10。

#####(2)整体结构

根据体系结构设计，我们将系统分为展示层、业务逻辑层、数据层。每一层之间为了增加灵活性，添加了一些接口。在展示层和业务逻辑层之间，根据SpringBoot的机制，通过URL的访问的方式实现和业务逻辑模块交互。而在业务逻辑层于数据持久层之间，则通过主要通过CouponMapper接口进行交流。为了隔离业务逻辑职责和逻辑控制职责，我们增加了CouponController，这CouponController会将对排片相关业务的处理委托给schedule对象。根据功能的不同，为了提高内聚性，分了两个接口/实现类来实现CouponController所具备的功能：CouponService。为了实现其中的个别相关功能，额外调用了一个接口来实现相关功能：CouponServiceForBl接口，用于：查找排片的相关信息和根据ID查找排片。

couponbl模块的设计图如图所示：

![couponbl](https://i.loli.net/2019/05/03/5ccbbe3cf2cb9.png)

couponbl模块各个类的职责如下表所示：  

| 模块                | 职责                          |
| ------------------- | ----------------------------- |
| CouponController  | 实现优惠相关的功能的控制逻辑  |
| CouponServiceImpl | 实现优惠相关功能的业务逻辑    |

#####(3) 模块内部类的接口规范

![](https://i.loli.net/2019/05/03/5ccbc4f499586.png)

![](https://i.loli.net/2019/05/03/5ccbc514a5e36.png)

#####(4) 业务逻辑层的动态模型

下图所表示的状态图描述了Couponbl模块中，他的生存期间的状态序列、引起转移的时间，以及因为转移状态而伴随的动作。随着addCoupon方法的调用，系统进入了CouponForm状态；再一次调用CouponServiceImpl的AddCoupon方法，系统进入CouponMapper状态；在这个状态下系统调用InsertCoupon方法，向底层数据库中插入相关的优惠信息，并返回一个ResponceVO，系统进入ResponceVO状态并且显示

![](https://i.loli.net/2019/05/03/5ccbc64b27237.png)

#####(5) 业务逻辑层的设计原理
利用委托式控制风格，每一个界面需要访问的业务逻辑由各自的控制器委托给不同的对象

## 5. 依赖视角

![](https://i.loli.net/2019/05/03/5ccbed673dd4a.png)