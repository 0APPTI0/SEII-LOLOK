## 逻辑视图

影院管理系统之中，选择了MVC结构风格，将系统分为模型（Moudle）、视图（View）、控制（Controller）三个部分。视图模块包含了浏览器直接向用户展示的页面部分，模型则包含了各个功能的底层service实现以及每个实现所需要的DAO操作，控制模块则负责处理视图模块的调用模型的服务以及视图选择服务，执行业务逻辑。

但是由于WEB开发的特殊性，一般来讲前端模块不能直接和后端模块进行数据交互，只能通过HTTP请求通过Controller跟后端进行数据交互，因此无法实现“观察者模式”，其实是不完全的MVC。

![MVC](https://s2.ax1x.com/2019/04/11/AH0xZq.png)

图一  参照体系结构风格的包图表达逻辑视角



![MVC](https://i.loli.net/2019/04/18/5cb8685a4b7c7.png)  

图二  软件体系结构逻辑设计方案  









### 模块职责

- 模块视图

  本系统基于web应用，只需要在客户端使用浏览器访问浏览器端的服务即可。

  ![11](https://i.loli.net/2019/04/18/5cb86ce456d6c.png)

  

- 各模块职责

|     模块     | 职责                                               |
| :----------: | -------------------------------------------------- |
|   view模块   | 展示界面、用户直接交互                             |
| controller层 | 接收view模块的数据，并且调用相关的服务             |
|   module层   | service的具体实现+数据的持久化，返回数据给view层面 |

- 层之间调用接口

  这里view模块和controll模块通过web 容器自带的session以及cookie以及相应的post request来选择相关的控制逻辑，因此并不需要人为规定接口进行沟通，

|                             接口                             | 服务调用方        | 服务提供方       |
| :----------------------------------------------------------: | ----------------- | ---------------- |
| **accountservice**、**movieservice**、**cardservice**、**layoutservice**、**statisticalservice**、**buyticketservice**、**Promotionsservice** | 服务端control模块 | 服务端module模块 |



借用查询电影信息来说明模块之间的调用，如图所示。view模块和controller模块之间，通过post request的方式，更改访问的URL来实现“一个界面对应着一种controller”。通过session，cookie等等来和controller进行数据的交互。而controller在接收到来自view的请求之后，会跳转到相应的bl类，调用module中提供的各种service来实现用户所需要的功能。

这样，大大降低了每一个模块之间的耦合度，便于开发、测试和维护。

![11](https://i.loli.net/2019/04/19/5cb984fc38b02.png)







### servi

#### 职责

#### 接口规范

